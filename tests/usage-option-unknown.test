#!/bin/sh

# Check that ratfor barfs if given an unwritable file output file.

. ../lib/rat4-testsuite-init.sh || exit 99

echo 'junk' > tst.r

run_RATFOR -e 2 -- -x tst.r || testcase_FAIL
$GREP "^$rat4t_ratfor_rx: \`-x': invalid option" stderr || testcase_FAIL
$GREP "^Usage:" stderr || testcase_FAIL

test ! -f none

run_RATFOR -e 2 -- -C -x -@ -o none tst.r -3 || testcase_FAIL
test ! -f none || testcase_FAIL
$GREP "^$rat4t_ratfor_rx: \`-x': invalid option" stderr || testcase_FAIL
$GREP "^$rat4t_ratfor_rx: \`-3': invalid option" stderr || testcase_FAIL
$GREP "^$rat4t_ratfor_rx: \`-@': invalid option" stderr || testcase_FAIL
$GREP "^Usage:" stderr || testcase_FAIL

testcase_DONE

# vim: ft=sh ts=4 sw=4 et
