#!/bin/sh

# Check that ratfor barfs if given an unwritable file output file.

. ../lib/rat4-t.sh || exit 99

echo 'junk' > tst.r

run_RATFOR -e 2 -- -x tst.r || testcase_FATAL_FAILURE
$GREP "^$ratfor_rx: \`-x': invalid option" stderr || testcase_FATAL_FAILURE
$GREP "^Usage:" stderr || testcase_FATAL_FAILURE

test ! -f none

run_RATFOR -e 2 -- -C -x -@ -o none tst.r -3 || testcase_FATAL_FAILURE
test ! -f none || testcase_FATAL_FAILURE
$GREP "^$ratfor_rx: \`-x': invalid option" stderr || testcase_FATAL_FAILURE
$GREP "^$ratfor_rx: \`-3': invalid option" stderr || testcase_FATAL_FAILURE
$GREP "^$ratfor_rx: \`-@': invalid option" stderr || testcase_FATAL_FAILURE
$GREP "^Usage:" stderr || testcase_FATAL_FAILURE

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
