#!/bin/sh

# Check that `include' complains correctly if the path of file to include
# is not specified.

# WARNING: ratfor must not abort on failed include. Check for this, too.

. ./TestsAux/defs.sh || exit 99

cat > tst1.r <<EOF
include
EOF

cat > tst2.r <<EOF
include;
EOF

cat > tst3.r <<EOF
include
x
EOF

cat > tst4.r <<EOF
include; x
EOF

cat > tst5.r <<EOF
a
include
b
EOF

cat > tst6.r <<EOF
a; include; b;
EOF

cat > tst7.r <<EOF
define VOID
include VOID
EOF

cat > tst8.r <<EOF
define(BLANK,   )
include BLANK
EOF

for i in 1 2 3 4 5 6 7 8; do
    run_command -e 1 "$RATFOR" tst$i.r || testcase_FAIL
    mv stdout stdout$i
    mv stderr stderr$i
    $FGREP ': include: missing filename' stderr$i || testcase_FAIL
done

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
