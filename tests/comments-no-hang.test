#!/bin/sh

# Check that comments with the `-C' switch do not make ratfor hang.
# This bug already showed up in practice.

. ../lib/rat4-t.sh || exit 99

echo 'abc # comment after another token, as the last line of file' > tst.r

e=0
run_command timer -t 5 "$RATFOR" -C tst.r || e=$?
case $e in
    255) testcase_FAIL "ratfor hanged!";;
    0) testcase_PASS;;
    *) testcase_FAIL "ratfor failed with status $e";;
esac

# vim: ft=sh ts=4 sw=4 et
