#!/bin/sh

# Check `include' on paths containing `.' or `..'

. ../lib/rat4-t.sh || exit 99

mkdir subdir
echo 'include ./inc.r' > tstdot.r
echo 'include ../inc.r' > subdir/tstdotdot.r
echo 'foo' > inc.r

run_RATFOR tstdot.r || testcase_FATAL_FAILURE
$FGREP 'include' stdout && testcase_FATAL_FAILURE
$FGREP 'foo' stdout || testcase_FATAL_FAILURE

cd subdir
run_RATFOR tstdotdot.r || testcase_FATAL_FAILURE
$FGREP 'include' stdout && testcase_FATAL_FAILURE
$FGREP 'foo' stdout || testcase_FATAL_FAILURE

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
