#!/bin/sh

# Check that ratfor do automatic line continuation after lables, until a
# statement is found.

. ./TestsAux/rat4-t.sh || exit 99

require_fortran_compiler

cat > tst.r <<EOF
program testlabel
100 format('first')
200 format('second')

goto 10
20
write(*,200)
call halt
10


write(*,100)
goto 20
end
EOF

cat > exp <<EOF
first
second
EOF

cat tst.r

run_RATFOR tst.r || testcase_FAIL
mv stdout tst.f
run_F77 tst.f || testcase_FAIL
run_command timer -t 10 ./tst.exe || testcase_FAIL
test ! -s stderr || testcase_FAIL
mv stdout got

cat exp
cat got

$DIFF_U exp got || testcase_FAIL

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
