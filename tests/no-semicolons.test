#!/bin/sh

# Check that semicolons are not improperly passed down in ratfor output.

. ./defs.sh || exit 99

cat > tst.r <<\EOF
;
i = 1;
a = 496; b = 8128;
theAnswer = 42;
if (false) die; else live;

foo();
{ foo(); };

if (false) { die;; {; die now; };;; } else {
   { { { live;} ;}; ;;;;; };;;
}

define DoNothing {}
define(StillDoNothing, {
})

# }

DoNothing
StillDoNothing
EOF

run_RATFOR -e 0 tst.r || testcase_FAIL
$FGREP ';' stdout && testcase_FAIL

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
