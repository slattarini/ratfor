#!/bin/sh

# Check that semicolons are not improperly passed down in ratfor output.

. ../lib/rat4-t.sh || exit 99

cat > tst.r <<EOF
;
i = 1;
a = 496; b = 8128;
theAnswer = 42;
if (false) die; else live;

foo; ;  $TAB; @;$TAB; ;

foo();
{ foo(); };

if (false) { die;; {; die now; };;; } else {
   { { { live;} ;}; ;;;;; };;;
}

define DoNothing {}
define(StillDoNothing, {
})

# }

DoNothing
StillDoNothing
EOF

cat tst.r

run_RATFOR tst.r || testcase_FAIL
$FGREP ';' stdout && testcase_FAIL

testcase_DONE

# vim: ft=sh ts=4 sw=4 et
