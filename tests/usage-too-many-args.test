#!/bin/sh

# Check that ratfor barfs if called with more than one non-option argument

. ../lib/rat4-t.sh || exit 99

echo 'junk1' > tst1.r
echo 'junk2' > tst2.r
echo 'junk3' > tst3.r
echo 'junk4' > tst4.r
echo 'junk5' > tst5.r

run_RATFOR -e 2 tst1.r tst2.r || testcase_FATAL_FAILURE
$GREP "^$ratfor_rx: too many arguments" stderr || testcase_FATAL_FAILURE
$GREP "^Usage:" stderr || testcase_FATAL_FAILURE

test ! -f none

run_RATFOR -e 2 -- -o none tst1.r tst2.r || testcase_FATAL_FAILURE
$GREP "^$ratfor_rx: too many arguments" stderr || testcase_FATAL_FAILURE
$GREP "^Usage:" stderr || testcase_FATAL_FAILURE
test ! -f none || testcase_FATAL_FAILURE

run_RATFOR -e 2 tst1.r tst2.r tst3.r tst4.r tst5.r || testcase_FATAL_FAILURE
$GREP "^$ratfor_rx: too many arguments" stderr || testcase_FATAL_FAILURE
$GREP "^Usage:" stderr || testcase_FATAL_FAILURE

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
