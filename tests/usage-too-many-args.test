#!/bin/sh

# Check that ratfor barfs if called with more than one non-option argument

. ./TestsAux/defs.sh || exit 99

echo 'junk1' > tst1.r
echo 'junk2' > tst2.r
echo 'junk3' > tst3.r
echo 'junk4' > tst4.r
echo 'junk5' > tst5.r

run_command -e 2 "$RATFOR" tst1.r tst2.r || testcase_FAIL
$GREP "^$ratfor_rx: too many arguments" stderr || testcase_FAIL
$GREP "^Usage:" stderr || testcase_FAIL

test ! -f none

run_command -e 2 "$RATFOR" -o none tst1.r tst2.r || testcase_FAIL
$GREP "^$ratfor_rx: too many arguments" stderr || testcase_FAIL
$GREP "^Usage:" stderr || testcase_FAIL
test ! -f none || testcase_FAIL

run_command -e 2 "$RATFOR" tst1.r tst2.r tst3.r tst4.r tst5.r || testcase_FAIL
$GREP "^$ratfor_rx: too many arguments" stderr || testcase_FAIL
$GREP "^Usage:" stderr || testcase_FAIL

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
