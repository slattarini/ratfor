#!/bin/sh
# $Id$

# Check that there are no obvious errors in the testing framework.

. ./defs.sh || exit 99

test_func() {
    cat <<EOF
OUT
EOF
    echo ERR >&2
}
run_CMD test_func || testcase_FAIL
test -f stdout || testcase_FAIL
test -f stderr || testcase_FAIL
test x"`cat stdout`" = x"OUT" || testcase_FAIL
test x"`cat stderr`" = x"ERR" || testcase_FAIL

run_CMD eval 'echo OUT_bis && echo ERR_bis >&2 && :' || testcase_FAIL
test -f stdout || testcase_FAIL
test -f stderr || testcase_FAIL
test x"`cat stdout`" = x"OUT_bis" || testcase_FAIL
test x"`cat stderr`" = x"ERR_bis" || testcase_FAIL

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
