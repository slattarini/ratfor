#!/bin/sh

# Check that ratfor complains if the keyword `subroutine' is not followed
# by a subroutine name (even when empty macros are involved).

. ../lib/rat4-t.sh || exit 99
ls -l "$srcdir"/subprog-name-invalid.sh
. "$srcdir"/subprog-name-invalid.sh || testcase_HARDERROR

write_testfile() {
    do_define STMTEND "$2"
    do_prefix "$1 STMTEND" "${3-}"
}
check_default_subprog_missnames 'subroutine'

write_testfile() {
    do_define SUBPROG "$1"
    do_prefix "SUBPROG $2" "${3-}"
}
check_default_subprog_missnames 'subroutine'

write_testfile() {
    do_define STMTEND "$2"
    do_define SUBPROG "$1"
    do_prefix "SUBPROG STMTEND" "${3-}"
}
check_default_subprog_missnames 'subroutine'

testcase_DONE

# vim: ft=sh ts=4 sw=4 et
