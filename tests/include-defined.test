#!/bin/sh

# Check that `include' works when passed as argument a `define'd token.

. ../lib/rat4-t.sh || exit 99

cat > foo.r <<EOF
foo1
foo2
EOF

cat > tst.r <<EOF
define BAR foo.r
main1
include BAR
main2
EOF

cat > exp <<\EOF
main1
foo1
foo2
main2
EOF

cat tst.r
cat foo.r

run_RATFOR tst.r || testcase_FATAL_FAILURE
$SED -e '/^[cC]/d' -e "s/^$ws0p//" -e '/^$/d' stdout >got

cat exp
cat got

$DIFF_U exp got || testcase_FATAL_FAILURE

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
