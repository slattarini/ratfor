#!/bin/sh
# $Id$

# Check that 'include' correctly keep track of file names and line numbers.

. ./defs.sh || exit 99

cat >foo.r <<EOF
foo1
foo2
}
foo4
include bar.r
foo6
}
EOF

cat > bar.r <<EOF
bar1
}
bar3
EOF

cat foo.r
cat bar.r

err='illegal right brace'
run_RATFOR -e 1 foo.r || testcase_FAIL
$FGREP "foo.r:3: $err" stderr || testcase_FAIL
$FGREP "bar.r:2: $err" stderr || testcase_FAIL
$FGREP "foo.r:7: $err" stderr || testcase_FAIL

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
