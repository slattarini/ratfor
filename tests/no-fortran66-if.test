#!/bin/sh

# Check that double quotes (`"') are not improperly passed down in
# ratfor output.

. ../lib/rat4-t.sh || exit 99

cat > tst.r <<EOF
if (is_foo)
    foo()
else if (is_bar)
    bar()
else
    quux()
EOF

cat tst.r

run_RATFOR tst.r || testcase_FATAL_FAILURE
grep -v '^[cC]' stdout >stdout-t
mv stdout-t stdout

$FGREP 'goto' stdout && testcase_FATAL_FAILURE
$FGREP 'then' stdout || testcase_FATAL_FAILURE
$FGREP 'else' stdout || testcase_FATAL_FAILURE
$FGREP 'endif' stdout || testcase_FATAL_FAILURE
test `$FGREP 'then' stdout | wc -l` -eq 2 || testcase_FATAL_FAILURE
test `$FGREP 'endif' stdout | wc -l` -eq 2 || testcase_FATAL_FAILURE

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
