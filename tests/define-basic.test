#!/bin/sh

# Check simple usages of `define'.

. ../lib/rat4-t.sh || exit 99

tr '_' "$TAB" >tst.r <<EOF
define sym1 text1
define(sym2,text2)
define sym3  _"text3" _
define (sym4,text4)_ _
x1 sym1
sym 1
x2:sym2
sym 2
x3?sym3
sym 3
x4,sym4
sym 4
sym5
EOF

run_RATFOR tst.r || testcase_FATAL_FAILURE
test -s stderr && testcase_FATAL_FAILURE

$FGREP -i 'define' stdout && testcase_FATAL_FAILURE

$GREP 'sym[1234]' stdout && testcase_FATAL_FAILURE
$FGREP 'sym5' stdout || testcase_FATAL_FAILURE

for i in 1 2 3 4; do
    $GREP "sym  *$i" stdout || testcase_FATAL_FAILURE
done

$FGREP 'x1 text1' stdout || testcase_FATAL_FAILURE
$FGREP 'x2:text2' stdout || testcase_FATAL_FAILURE
$FGREP 'x3?"text3"' stdout || testcase_FATAL_FAILURE
$FGREP 'x4,text4' stdout || testcase_FATAL_FAILURE

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
