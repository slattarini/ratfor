#!/bin/sh

# Check simple usages of `define'.

. ./TestsAux/defs.sh || exit 99

tr '_' "$TAB" >tst.r <<EOF
define sym1 text1
define(sym2,text2)
define sym3  _"text3" _
define (sym4,text4)_ _
x1 sym1
sym 1
x2:sym2
sym 2
x3?sym3
sym 3
x4,sym4
sym 4
sym5
EOF

run_CMD "$RATFOR" tst.r || testcase_FAIL
test -s stderr && testcase_FAIL

$FGREP -i 'define' stdout && testcase_FAIL

$GREP 'sym[1234]' stdout && testcase_FAIL
$FGREP 'sym5' stdout || testcase_FAIL

for i in 1 2 3 4; do
    $GREP "sym  *$i" stdout || testcase_FAIL
done

$FGREP 'x1 text1' stdout || testcase_FAIL
$FGREP 'x2:text2' stdout || testcase_FAIL
$FGREP 'x3?"text3"' stdout || testcase_FAIL
$FGREP 'x4,text4' stdout || testcase_FAIL

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
