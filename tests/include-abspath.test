#!/bin/sh

# Check that 'include' works on absolute paths.

. ./TestsAux/test-lib.sh || exit 99

# We can't use `pwd` as the absolute directory since it could
# contain spaces or other "weird" characters.

abs_tmp_dir=/tmp/$me-$$.dir
mkdir "$abs_tmp_dir"
echo 'foobar' > "$abs_tmp_dir/inc.r"
echo "include $abs_tmp_dir/inc.r" > tst.r

run_RATFOR tst.r || {
    rm -rf "$abs_tmp_dir"
    testcase_FAIL
}
rm -rf "$abs_tmp_dir"
$FGREP 'foobar' stdout || testcase_FAIL

testcase_PASS

# vim: ft=sh ts=4 sw=4 et
