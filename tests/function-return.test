#!/bin/sh

# Check that the `return' statements work inside a function.  This test
# might be supersed by the `return-keyword...' tests, but we won't remove
# it anyway, faithful to our policy of never removing working tests.

. ../lib/rat4-t.sh || exit 99

cat > tst.r <<EOF
function foo
  return 1
end
EOF

run_RATFOR tst.r || testcase_FATAL_FAILURE
$GREP -v '^[cC]' stdout | ws_normalize >stdout-t
mv -f stdout-t stdout
$GREP '^foo *= *1$' stdout || testcase_FATAL_FAILURE
$GREP '^return$' stdout || testcase_FATAL_FAILURE

testcase_DONE

# vim: ft=sh ts=4 sw=4 et
